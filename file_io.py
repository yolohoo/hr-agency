"""
file_io.py - низкоуровневые операции с файлами
"""

import json
import os


def load_applicants_from_file(filename):
    """
    Загружает данные о соискателях из JSON файла.
    """
    if not os.path.exists(filename):
        raise FileNotFoundError(f"Файл '{filename}' не найден.")

    with open(filename, 'r', encoding='utf-8') as file:
        data = json.load(file)

    from applicant import Applicant
    applicants = []
    for item in data:
        applicant = Applicant.from_dict(item)
        applicants.append(applicant)

    return applicants


def save_applicants_to_file(applicants, filename):
    """
    Сохраняет данные о соискателях в JSON файл.
    """
    data = [applicant.to_dict() for applicant in applicants]

    with open(filename, 'w', encoding='utf-8') as file:
        json.dump(data, file, ensure_ascii=False, indent=2)


def create_test_database():
    """
    Создает тестовую базу данных соискателей.
    """
    from applicant import Applicant

    applicants = [
        # Программисты
        Applicant("Иванов", "Иван", "Иванович", "М", "1990-05-15", "Программист", 5, ["Английский"], 120000),
        Applicant("Петров", "Петр", "Петрович", "М", "1988-11-23", "Программист", 7, ["Английский", "Немецкий"],
                  150000),
        Applicant("Сидорова", "Мария", "Сергеевна", "Ж", "1992-03-10", "Программист", 3, ["Английский"], 100000),
        Applicant("Козлов", "Алексей", "Владимирович", "М", "1995-08-22", "Программист", 2, ["Английский"], 90000),
        Applicant("Новиков", "Дмитрий", "Александрович", "М", "1985-12-05", "Программист", 10,
                  ["Английский", "Китайский"], 200000),

        # Менеджеры
        Applicant("Михайлов", "Андрей", "Викторович", "М", "1986-06-12", "Менеджер", 8, ["Английский"], 115000),
        Applicant("Федорова", "Татьяна", "Павловна", "Ж", "1990-01-20", "Менеджер", 5, ["Английский", "Немецкий"],
                  105000),
        Applicant("Алексеев", "Константин", "Сергеевич", "М", "1993-08-05", "Менеджер", 2, ["Английский"], 80000),
        Applicant("Дмитриева", "Наталья", "Валерьевна", "Ж", "1984-10-17", "Менеджер", 11,
                  ["Английский", "Французский"], 140000),

        # Дизайнеры
        Applicant("Васильев", "Станислав", "Евгеньевич", "М", "1992-09-01", "Дизайнер", 4, ["Английский"], 105000),
        Applicant("Соловьева", "Дарья", "Максимовна", "Ж", "1989-04-15", "Дизайнер", 6, ["Английский"], 125000),
        Applicant("Богданов", "Виктор", "Романович", "М", "1995-07-23", "Дизайнер", 1, ["Английский"], 70000),

        # Аналитики
        Applicant("Григорьев", "Артем", "Сергеевич", "М", "1988-03-07", "Аналитик", 7, ["Английский"], 135000),
        Applicant("Белова", "Вероника", "Дмитриевна", "Ж", "1991-10-24", "Аналитик", 4, ["Английский", "Испанский"],
                  100000),
    ]

    return applicants